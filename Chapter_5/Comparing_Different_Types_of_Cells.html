
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>5.4. Comparing Different Types of Cells &#8212; A Hands-On Guide to Neural Data Science</title>
    
  <link rel="stylesheet" href="../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.2d2078699c18a0efb88233928e1cf6ed.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.be0a4a0c39cd630af62a2fcf693f3f06.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="6. Two Photon Imaging" href="../Chapter_6/Two_Photon_Imaging.html" />
    <link rel="prev" title="5.3. Available Pre-Computed Features" href="Available_Pre-Computed_Features.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/brainz.jpeg" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">A Hands-On Guide to Neural Data Science</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../landing_page.html">
   A Hands-On Guide to Neural Data Science
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_1/Neural_Data_Science.html">
   1. Neural Data Science
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_2/Data_Science_In_Python.html">
   2. Data Science in Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_3/Statistical_Concepts.html">
   3. Statistical Concepts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_4/Neurodata_Without_Borders.html">
   4. Neurodata Without Borders
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="reference internal" href="Single-Cell_Electrophysiology.html">
   5. Single-Cell Electrophysiology
  </a>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="Morphology_For_Single_Cells.html">
     5.1. Morphology for Single Cells
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Plotting_A_Single_Sweep_of_Data.html">
     5.2. Plotting a Signle Sweep of Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Available_Pre-Computed_Features.html">
     5.3. Available Pre-Computed Features
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     5.4. Comparing Different Types of Cells
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_6/Two_Photon_Imaging.html">
   6. Two Photon Imaging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_7/Large_Scale_Electrophysiology.html">
   7. Large Scale Electrophysiology
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_8/Connectivity_Atlas.html">
   8. Allen Mouse Brain Connectivity Atlas
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_9/Brain_Imaging_Data_Structures.html">
   9. Brain Imaging Data Structures
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_10/Text_Analyses_of_Neuroscience_Literature.html">
   10. Text Analyses of Neuroscience Literature
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Chapter_11/Approaches_to_Analyzing_Large_Datasets.html">
   11. Approaches to Analyzing Large Datasets
  </a>
 </li>
</ul>

</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    
    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/Chapter_5/Comparing_Different_Types_of_Cells.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
    
</div>
        <!-- Source interaction buttons -->


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/NeuralDataScience/NeuralDataScience.github.io/master?urlpath=tree/Chapter_5/Comparing_Different_Types_of_Cells.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/NeuralDataScience/NeuralDataScience.github.io/blob/master/Chapter_5/Comparing_Different_Types_of_Cells.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#humans-vs-mice">
   5.4.1. Humans vs Mice
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#two-different-cre-lines">
   5.4.2. Two Different Cre-Lines
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#spiny-vs-aspiny">
   5.4.3. Spiny vs Aspiny
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#layers-of-cortex-depth">
   5.4.4. Layers of Cortex: Depth
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="comparing-different-types-of-cells">
<h1><span class="section-number">5.4. </span>Comparing Different Types of Cells<a class="headerlink" href="#comparing-different-types-of-cells" title="Permalink to this headline">¶</a></h1>
<p>In this section we will discuss how to interact with different cell types and take a look at how we can, analyze, draw connections, and plot differences between our cell types. We will be covering Humans vs Mice cells, how to utilize the Allen’s data of Cre lines, diferences between differing dendrite types, and learn how to inspect the different layers of cortex.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># This will ensure that the AllenSDK is installed.</span>
<span class="c1"># If not, it will install it for you.</span>
<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">allensdk</span>
    <span class="k">if</span> <span class="n">allensdk</span><span class="o">.</span><span class="n">__version__</span> <span class="o">==</span> <span class="s1">&#39;2.11.2&#39;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;allensdk already installed.&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span> 
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;incompatible version of allensdk installed&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="o">!</span>pip install allensdk
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>allensdk already installed.
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Import the &quot;Cell Types Cache&quot; from the AllenSDK core package</span>
<span class="kn">from</span> <span class="nn">allensdk.core.cell_types_cache</span> <span class="kn">import</span> <span class="n">CellTypesCache</span>

<span class="c1">#Import CellTypesApi, which will allow us to query the database.</span>
<span class="kn">from</span> <span class="nn">allensdk.api.queries.cell_types_api</span> <span class="kn">import</span> <span class="n">CellTypesApi</span>

<span class="c1"># Import Toolkits </span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span> 
<span class="o">%</span><span class="k">matplotlib</span> inline 

<span class="c1"># We&#39;ll then initialize the cache as &#39;ctc&#39; (cell types cache)</span>
<span class="n">ctc</span> <span class="o">=</span> <span class="n">CellTypesCache</span><span class="p">(</span><span class="n">manifest_file</span><span class="o">=</span><span class="s1">&#39;cell_types/manifest.json&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Packages were successfully imported.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Packages were successfully imported.
</pre></div>
</div>
</div>
</div>
<div class="section" id="humans-vs-mice">
<h2><span class="section-number">5.4.1. </span>Humans vs Mice<a class="headerlink" href="#humans-vs-mice" title="Permalink to this headline">¶</a></h2>
<p>As stated in previous sections, the <code class="docutils literal notranslate"><span class="pre">get_cells</span></code> method downloads metadata for all cells in the database. By specifying a species within the method, <code class="docutils literal notranslate"><span class="pre">get_cells</span></code> will only retrieve the data from the species of interest. Our database has two species to work with; mice and humans. To only download human cells you would need to specify <code class="docutils literal notranslate"><span class="pre">species</span> <span class="pre">=</span> <span class="pre">[CellTypesApi.HUMAN]</span></code> within <code class="docutils literal notranslate"><span class="pre">get_cells()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Download meatadata for only human cells </span>
<span class="n">human_cells</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">ctc</span><span class="o">.</span><span class="n">get_cells</span><span class="p">(</span><span class="n">species</span><span class="o">=</span><span class="p">[</span><span class="n">CellTypesApi</span><span class="o">.</span><span class="n">HUMAN</span><span class="p">]))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>

<span class="c1"># Download electrophysiology data </span>
<span class="n">ephys_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">ctc</span><span class="o">.</span><span class="n">get_ephys_features</span><span class="p">())</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;specimen_id&#39;</span><span class="p">)</span>

<span class="c1"># Combine our ephys data with our metadata for human cells </span>
<span class="n">human_ephys_df</span> <span class="o">=</span> <span class="n">human_cells</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ephys_df</span><span class="p">)</span>
<span class="n">human_ephys_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>reporter_status</th>
      <th>cell_soma_location</th>
      <th>species</th>
      <th>name</th>
      <th>structure_layer_name</th>
      <th>structure_area_id</th>
      <th>structure_area_abbrev</th>
      <th>transgenic_line</th>
      <th>dendrite_type</th>
      <th>apical</th>
      <th>...</th>
      <th>trough_t_ramp</th>
      <th>trough_t_short_square</th>
      <th>trough_v_long_square</th>
      <th>trough_v_ramp</th>
      <th>trough_v_short_square</th>
      <th>upstroke_downstroke_ratio_long_square</th>
      <th>upstroke_downstroke_ratio_ramp</th>
      <th>upstroke_downstroke_ratio_short_square</th>
      <th>vm_for_sag</th>
      <th>vrest</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>525011903</th>
      <td>None</td>
      <td>[273.0, 354.0, 216.0]</td>
      <td>Homo Sapiens</td>
      <td>H16.03.003.01.14.02</td>
      <td>3</td>
      <td>12113</td>
      <td>FroL</td>
      <td></td>
      <td>spiny</td>
      <td>intact</td>
      <td>...</td>
      <td>4.134987</td>
      <td>1.375253</td>
      <td>-53.968754</td>
      <td>-59.510420</td>
      <td>-71.197919</td>
      <td>2.895461</td>
      <td>2.559876</td>
      <td>3.099787</td>
      <td>-88.843758</td>
      <td>-70.561035</td>
    </tr>
    <tr>
      <th>528642047</th>
      <td>None</td>
      <td>[69.0, 254.0, 96.0]</td>
      <td>Homo Sapiens</td>
      <td>H16.06.009.01.02.06.05</td>
      <td>5</td>
      <td>12141</td>
      <td>MTG</td>
      <td></td>
      <td>aspiny</td>
      <td>NA</td>
      <td>...</td>
      <td>NaN</td>
      <td>1.051160</td>
      <td>-67.468758</td>
      <td>NaN</td>
      <td>-70.875002</td>
      <td>1.891881</td>
      <td>NaN</td>
      <td>1.989616</td>
      <td>-101.000000</td>
      <td>-69.209610</td>
    </tr>
    <tr>
      <th>537256313</th>
      <td>None</td>
      <td>[322.0, 255.0, 92.0]</td>
      <td>Homo Sapiens</td>
      <td>H16.03.006.01.05.02</td>
      <td>4</td>
      <td>12141</td>
      <td>MTG</td>
      <td></td>
      <td>spiny</td>
      <td>truncated</td>
      <td>...</td>
      <td>5.694547</td>
      <td>1.389900</td>
      <td>-52.125004</td>
      <td>-51.520836</td>
      <td>-72.900002</td>
      <td>3.121182</td>
      <td>3.464528</td>
      <td>3.054681</td>
      <td>-87.531250</td>
      <td>-72.628105</td>
    </tr>
    <tr>
      <th>519832676</th>
      <td>None</td>
      <td>[79.0, 273.0, 91.0]</td>
      <td>Homo Sapiens</td>
      <td>H16.03.001.01.09.01</td>
      <td>3</td>
      <td>12141</td>
      <td>MTG</td>
      <td></td>
      <td>spiny</td>
      <td>truncated</td>
      <td>...</td>
      <td>9.962780</td>
      <td>1.211020</td>
      <td>-53.875004</td>
      <td>-52.416668</td>
      <td>-73.693753</td>
      <td>4.574865</td>
      <td>3.817988</td>
      <td>4.980603</td>
      <td>-84.218758</td>
      <td>-72.547661</td>
    </tr>
    <tr>
      <th>596020931</th>
      <td>None</td>
      <td>[66.0, 220.0, 105.0]</td>
      <td>Homo Sapiens</td>
      <td>H17.06.009.11.04.02</td>
      <td>4</td>
      <td>12141</td>
      <td>MTG</td>
      <td></td>
      <td>aspiny</td>
      <td>NA</td>
      <td>...</td>
      <td>14.667340</td>
      <td>1.336668</td>
      <td>-63.593754</td>
      <td>-63.239583</td>
      <td>-75.518753</td>
      <td>1.452890</td>
      <td>1.441754</td>
      <td>1.556087</td>
      <td>-82.531250</td>
      <td>-74.260269</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 70 columns</p>
</div></div></div>
</div>
<p>The dataset also includes metadata on mouse cells. To download our mouse cells you would need to specify <code class="docutils literal notranslate"><span class="pre">species</span> <span class="pre">=</span> <span class="pre">[CellTypesApi.MOUSE]</span></code> within <code class="docutils literal notranslate"><span class="pre">get_cells()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Download meatadata for only mouse cells </span>
<span class="n">mouse_cells</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">ctc</span><span class="o">.</span><span class="n">get_cells</span><span class="p">(</span><span class="n">species</span> <span class="o">=</span> <span class="p">[</span><span class="n">CellTypesApi</span><span class="o">.</span><span class="n">MOUSE</span><span class="p">]))</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>

<span class="c1"># Combine our mouse metadata with electrophysiology data </span>
<span class="n">mouse_ephys_df</span> <span class="o">=</span> <span class="n">mouse_cells</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ephys_df</span><span class="p">)</span>
<span class="n">mouse_ephys_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>reporter_status</th>
      <th>cell_soma_location</th>
      <th>species</th>
      <th>name</th>
      <th>structure_layer_name</th>
      <th>structure_area_id</th>
      <th>structure_area_abbrev</th>
      <th>transgenic_line</th>
      <th>dendrite_type</th>
      <th>apical</th>
      <th>...</th>
      <th>trough_t_ramp</th>
      <th>trough_t_short_square</th>
      <th>trough_v_long_square</th>
      <th>trough_v_ramp</th>
      <th>trough_v_short_square</th>
      <th>upstroke_downstroke_ratio_long_square</th>
      <th>upstroke_downstroke_ratio_ramp</th>
      <th>upstroke_downstroke_ratio_short_square</th>
      <th>vm_for_sag</th>
      <th>vrest</th>
    </tr>
    <tr>
      <th>id</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>565871768</th>
      <td>positive</td>
      <td>[8966.56330957526, 1429.52689052075, 8567.3896...</td>
      <td>Mus musculus</td>
      <td>Oxtr-2A-Cre;Ai14-293837.03.01.02</td>
      <td>5</td>
      <td>385</td>
      <td>VISp</td>
      <td>Oxtr-T2A-Cre</td>
      <td>aspiny</td>
      <td>NA</td>
      <td>...</td>
      <td>14.738000</td>
      <td>1.391268</td>
      <td>-59.281254</td>
      <td>-57.468754</td>
      <td>-75.756252</td>
      <td>1.564027</td>
      <td>1.304349</td>
      <td>1.679550</td>
      <td>-87.906258</td>
      <td>-74.926987</td>
    </tr>
    <tr>
      <th>469801138</th>
      <td>positive</td>
      <td>[7872.53138541818, 993.212032389272, 3127.1530...</td>
      <td>Mus musculus</td>
      <td>Pvalb-IRES-Cre;Ai14-170927.05.02.01</td>
      <td>4</td>
      <td>385</td>
      <td>VISp</td>
      <td>Pvalb-IRES-Cre</td>
      <td>aspiny</td>
      <td>NA</td>
      <td>...</td>
      <td>11.763808</td>
      <td>1.290815</td>
      <td>-55.875000</td>
      <td>-52.515627</td>
      <td>-69.109379</td>
      <td>1.162618</td>
      <td>1.197155</td>
      <td>1.369171</td>
      <td>-80.156250</td>
      <td>-72.042976</td>
    </tr>
    <tr>
      <th>605889373</th>
      <td>positive</td>
      <td>[9400.0, 1520.74232706376, 2188.13845194139]</td>
      <td>Mus musculus</td>
      <td>Vipr2-IRES2-Cre;Slc32a1-T2A-FlpO;Ai65-337419.0...</td>
      <td>2/3</td>
      <td>385</td>
      <td>VISp</td>
      <td>Slc32a1-T2A-FlpO|Vipr2-IRES2-Cre</td>
      <td>aspiny</td>
      <td>NA</td>
      <td>...</td>
      <td>8.432940</td>
      <td>1.315510</td>
      <td>-48.187500</td>
      <td>-54.364586</td>
      <td>-72.640628</td>
      <td>3.379321</td>
      <td>4.108774</td>
      <td>2.680139</td>
      <td>-83.593758</td>
      <td>-72.712036</td>
    </tr>
    <tr>
      <th>485909730</th>
      <td>positive</td>
      <td>[8881.0, 953.839501299405, 7768.22695782726]</td>
      <td>Mus musculus</td>
      <td>Cux2-CreERT2;Ai14-205530.03.02.01</td>
      <td>5</td>
      <td>385</td>
      <td>VISp</td>
      <td>Cux2-CreERT2</td>
      <td>spiny</td>
      <td>intact</td>
      <td>...</td>
      <td>2.888133</td>
      <td>1.520193</td>
      <td>-54.031254</td>
      <td>-57.385419</td>
      <td>-77.750005</td>
      <td>3.042933</td>
      <td>3.517684</td>
      <td>3.274181</td>
      <td>-101.000000</td>
      <td>-76.928391</td>
    </tr>
    <tr>
      <th>323865917</th>
      <td>positive</td>
      <td>[8125.0, 904.841803028986, 7819.69986630448]</td>
      <td>Mus musculus</td>
      <td>Scnn1a-Tg3-Cre;Ai14-172530.06.01.01</td>
      <td>5</td>
      <td>385</td>
      <td>VISp</td>
      <td>Scnn1a-Tg3-Cre</td>
      <td>spiny</td>
      <td>intact</td>
      <td>...</td>
      <td>3.467847</td>
      <td>1.317042</td>
      <td>-57.281254</td>
      <td>-56.895833</td>
      <td>-70.218751</td>
      <td>2.974194</td>
      <td>3.156117</td>
      <td>2.946463</td>
      <td>-88.406250</td>
      <td>-69.402855</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 70 columns</p>
</div></div></div>
</div>
<p>If you are having trouble with <code class="docutils literal notranslate"><span class="pre">get_cells()</span></code>, look through <a href="https://allensdk.readthedocs.io/en/latest/allensdk.core.cell_types_cache.html">the documentation for the CellTypesCache</a> for more information.</p>
<p>Let’s get some information about our cells. We can use <code class="docutils literal notranslate"><span class="pre">len()</span></code> on a dataframe to get the number of rows. Alternatively, we can use the <code class="docutils literal notranslate"><span class="pre">count()</span></code> method on our dataframe to get the number of values each column contains. The number of rows is equivalent to the number of observations (i.e. length of the dataframe).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">human_ephys_df</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
<span class="n">n_human_cells</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">human_ephys_df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Length of dataframe:&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n_human_cells</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>reporter_status                             0
cell_soma_location                        413
species                                   413
name                                      413
structure_layer_name                      413
                                         ... 
upstroke_downstroke_ratio_long_square     413
upstroke_downstroke_ratio_ramp            412
upstroke_downstroke_ratio_short_square    413
vm_for_sag                                413
vrest                                     413
Length: 70, dtype: int64

Length of dataframe:
413
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">mouse_ephys_df</span><span class="o">.</span><span class="n">count</span><span class="p">())</span>
<span class="n">n_mouse_cells</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">mouse_ephys_df</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Length of dataframe:&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n_mouse_cells</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>reporter_status                           1920
cell_soma_location                        1920
species                                   1920
name                                      1920
structure_layer_name                      1920
                                          ... 
upstroke_downstroke_ratio_long_square     1920
upstroke_downstroke_ratio_ramp            1861
upstroke_downstroke_ratio_short_square    1920
vm_for_sag                                1920
vrest                                     1920
Length: 70, dtype: int64

Length of dataframe:
1920
</pre></div>
</div>
</div>
</div>
<p>We can see that there are more mouse cells stored in the database than human cells.</p>
<p>Now that we have dataframes for both human and mouse cells, we can compare their electrophysiological properties and plot some graphs for data visualization. Lets start by comparing the resting membrane potential of human cells vs mouse cells using a boxplot.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select feature we would like to plot </span>
<span class="n">feat</span> <span class="o">=</span> <span class="s1">&#39;vrest&#39;</span>

<span class="c1"># Store our data </span>
<span class="n">data</span> <span class="o">=</span> <span class="p">([</span><span class="n">mouse_ephys_df</span><span class="p">[</span><span class="n">feat</span><span class="p">],</span> <span class="n">human_ephys_df</span><span class="p">[</span><span class="n">feat</span><span class="p">]])</span>

<span class="c1"># Setup our figure</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Resting Membrane Potential (mV)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="s1">&#39;Mouse&#39;</span><span class="p">,</span> <span class="s1">&#39;Human&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Differnece in Resting Membrane Potential&#39;</span><span class="p">)</span>

<span class="c1"># Show the plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Comparing_Different_Types_of_Cells_15_0.png" src="../_images/Comparing_Different_Types_of_Cells_15_0.png" />
</div>
</div>
<p>As you can see, the median and distribution of resting membrane potential between mouse cells and human cells is similar. This is good to know cosidering that mice are frequently used to conduct experiments to research human physiology.</p>
<p>For more information on <code class="docutils literal notranslate"><span class="pre">matplotlib.pyplot</span></code> and the figures that you can build with it, please visit the <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.html">matplotlib website</a>.</p>
</div>
<div class="section" id="two-different-cre-lines">
<h2><span class="section-number">5.4.2. </span>Two Different Cre-Lines<a class="headerlink" href="#two-different-cre-lines" title="Permalink to this headline">¶</a></h2>
<p>What if we want to know whether different genetically-identified cells have different intrinsic physiology? The Allen Institute for Brain Science uses transgenic mouse lines that have Cre-expressing cells to mark specific types of cells in the brain. Lets find out what cre-lines are availabe in our mouse data under the column <code class="docutils literal notranslate"><span class="pre">transgenic_line</span></code>.</p>
<p>We can take a look at how many different values are stored within a column using the <code class="docutils literal notranslate"><span class="pre">.unique()</span></code> method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mouse_ephys_df</span><span class="p">[</span><span class="s1">&#39;transgenic_line&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([&#39;Oxtr-T2A-Cre&#39;, &#39;Pvalb-IRES-Cre&#39;,
       &#39;Slc32a1-T2A-FlpO|Vipr2-IRES2-Cre&#39;, &#39;Cux2-CreERT2&#39;,
       &#39;Scnn1a-Tg3-Cre&#39;, &#39;Htr3a-Cre_NO152&#39;, &#39;Rorb-IRES2-Cre&#39;,
       &#39;Ctgf-T2A-dgCre&#39;, &#39;Nkx2-1-CreERT2&#39;, &#39;Vip-IRES-Cre&#39;,
       &#39;Chrna2-Cre_OE25&#39;, &#39;Nos1-CreERT2|Sst-IRES-FlpO&#39;, &#39;Scnn1a-Tg2-Cre&#39;,
       &#39;Nos1-CreERT2&#39;, &#39;Ntsr1-Cre_GN220&#39;, &#39;Esr2-IRES2-Cre&#39;,
       &#39;Tlx3-Cre_PL56&#39;, &#39;Vipr2-IRES2-Cre&#39;,
       &#39;Chrna2-Cre_OE25|Pvalb-T2A-Dre&#39;, &#39;Nr5a1-Cre&#39;, &#39;Ndnf-IRES2-dgCre&#39;,
       &#39;Sst-IRES-Cre&#39;, &#39;Gad2-IRES-Cre&#39;, &#39;Chat-IRES-Cre-neo&#39;,
       &#39;Slc17a6-IRES-Cre&#39;, &#39;Sim1-Cre_KJ18&#39;, &#39;Glt25d2-Cre_NF107&#39;,
       &#39;Rbp4-Cre_KL100&#39;, &#39;Penk-IRES2-Cre-neo&#39;,
       &#39;Htr3a-Cre_NO152|Pvalb-T2A-Dre&#39;, &#39;Esr2-IRES2-Cre|PhiC31-neo&#39;,
       &#39;Gng7-Cre_KH71&#39;, &#39;Pvalb-T2A-FlpO|Vipr2-IRES2-Cre&#39;,
       &#39;Pvalb-T2A-CreERT2&#39;, &#39;Esr2-IRES2-Cre-neo|PhiC31-neo&#39;,
       &#39;Esr2-IRES2-Cre-neo&#39;, &#39;Vipr2-IRES2-Cre-neo&#39;], dtype=object)
</pre></div>
</div>
</div>
</div>
<p>Next, lets select two different Cre lines from the dataset and create dataframes that only contain cells from those Cre lines. For more information on the Allen Cell Types Cre lines, please visit <a href="https://docs.google.com/document/d/1ZMMZgc7cS5BHhoWNqzjw95BdxOuj5wrYl9I7PV2HeUI/edit">the Allen Cell Types Cre Lines Glossary</a> for a short description of the cortical expression patterns of the transgenic Cre lines available in the Allen Cell Types dataset.</p>
<p><strong>Note</strong>: Be sure that you are using the entire name of the Cre line – that means everything within the single quotes above.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Choose your column of comparison </span>
<span class="n">column</span> <span class="o">=</span> <span class="s1">&#39;transgenic_line&#39;</span>

<span class="c1"># Choose your Cre lines of interest </span>
<span class="n">cre_line_1</span> <span class="o">=</span> <span class="s1">&#39;Oxtr-T2A-Cre&#39;</span>
<span class="n">cre_line_2</span> <span class="o">=</span> <span class="s1">&#39;Pvalb-IRES-Cre&#39;</span>

<span class="c1"># Create dataframes from the selected Cre lines above</span>
<span class="n">cre_line_1_df</span> <span class="o">=</span> <span class="n">mouse_ephys_df</span><span class="p">[</span><span class="n">mouse_ephys_df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">==</span><span class="n">cre_line_1</span><span class="p">]</span>
<span class="n">cre_line_2_df</span> <span class="o">=</span> <span class="n">mouse_ephys_df</span><span class="p">[</span><span class="n">mouse_ephys_df</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">==</span><span class="n">cre_line_2</span><span class="p">]</span>

<span class="c1"># Get the length of each dataframe</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cre_line_1_df</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39; cells with cre line&#39;</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">cre_line_1</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cre_line_2_df</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39; cells with cre line&#39;</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="n">cre_line_2</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>46 cells with cre line Oxtr-T2A-Cre
217 cells with cre line Pvalb-IRES-Cre
</pre></div>
</div>
</div>
</div>
<p>Now that we have two Cre lines to compare, we can begin to plot their physiology and check for differneces. Let’s start by plotting a distribution of the recorded resting membrane potential (vrest) for our two different Cre lines.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Modify this line to change the dimensions of your plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

<span class="c1"># Choose the parameter you would like to plot </span>
<span class="n">parameter</span> <span class="o">=</span> <span class="s1">&#39;vrest&#39;</span>

<span class="c1"># Plot the histogram, with density = True </span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">([</span><span class="n">cre_line_1_df</span><span class="p">[</span><span class="n">parameter</span><span class="p">],</span><span class="n">cre_line_2_df</span><span class="p">[</span><span class="n">parameter</span><span class="p">]],</span><span class="n">density</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Resting Membrane Potential (mV)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of Cells&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="n">cre_line_1</span><span class="p">,</span><span class="n">cre_line_2</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribution of Cre line 1 vs Cre line 2&#39;</span><span class="p">)</span>

<span class="c1"># Show the plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Comparing_Different_Types_of_Cells_26_0.png" src="../_images/Comparing_Different_Types_of_Cells_26_0.png" />
</div>
</div>
<p>Since the number of cells greatly differs between our cre lines, it would be more appropriate to plot a boxplot than plotting the distributions.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Modify this line to change the dimensions of your plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

<span class="c1"># Choose the parameter you would like to plot </span>
<span class="n">parameter</span> <span class="o">=</span> <span class="s1">&#39;vrest&#39;</span>

<span class="c1"># Plot the Boxplot </span>
<span class="n">plt</span><span class="o">.</span><span class="n">boxplot</span><span class="p">([</span><span class="n">cre_line_1_df</span><span class="p">[</span><span class="n">parameter</span><span class="p">],</span><span class="n">cre_line_2_df</span><span class="p">[</span><span class="n">parameter</span><span class="p">]])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Vrest (mV)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="n">cre_line_1</span><span class="p">,</span><span class="n">cre_line_2</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Vrest Boxplot&#39;</span><span class="p">)</span>

<span class="c1"># Show the plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Comparing_Different_Types_of_Cells_28_0.png" src="../_images/Comparing_Different_Types_of_Cells_28_0.png" />
</div>
</div>
</div>
<div class="section" id="spiny-vs-aspiny">
<h2><span class="section-number">5.4.3. </span>Spiny vs Aspiny<a class="headerlink" href="#spiny-vs-aspiny" title="Permalink to this headline">¶</a></h2>
<p>The database also contains cells of different dedrite types. To find out what dendrite types make up our cells, we can execute <code class="docutils literal notranslate"><span class="pre">unique()</span></code> on the <code class="docutils literal notranslate"><span class="pre">dendrite_type</span></code> column of our dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">human_ephys_df</span><span class="p">[</span><span class="s1">&#39;dendrite_type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;spiny&#39; &#39;aspiny&#39; &#39;sparsely spiny&#39;]
</pre></div>
</div>
</div>
</div>
<p>We can plot some of the metrics for our different dendrite types. Let’s look at the frequency of each dendrite type. <code class="docutils literal notranslate"><span class="pre">value_counts()</span></code> is a method that will count up the number of instances of each value.
<code class="docutils literal notranslate"><span class="pre">plot()</span></code> is a Pandas method that will plot, depending on the <code class="docutils literal notranslate"><span class="pre">kind</span></code> argument you give it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># For the different values in dendrite_type column, get the value_counts, </span>
<span class="c1"># and plot as a bar plot</span>
<span class="n">mouse_ephys_df</span><span class="p">[</span><span class="s1">&#39;dendrite_type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Number of cells&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Frequency of Dendrite Type in Mouse Cells&#39;</span><span class="p">)</span>

<span class="c1"># Show the plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Comparing_Different_Types_of_Cells_33_0.png" src="../_images/Comparing_Different_Types_of_Cells_33_0.png" />
</div>
</div>
<p>Let’s see how the different dendrite types differ when it comes to their electrophysiological properties. Below we will filter out cells by dendrite type and assign them to their repective dataframe.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select your cell types for comparison </span>
<span class="n">cell_type1</span> <span class="o">=</span> <span class="s1">&#39;spiny&#39;</span>
<span class="n">cell_type2</span> <span class="o">=</span> <span class="s1">&#39;aspiny&#39;</span>
<span class="n">cell_type3</span> <span class="o">=</span> <span class="s1">&#39;sparsely spiny&#39;</span>

<span class="c1"># Create your cell type specific daaframes </span>
<span class="n">spiny_df</span> <span class="o">=</span> <span class="n">mouse_ephys_df</span><span class="p">[</span><span class="n">mouse_ephys_df</span><span class="p">[</span><span class="s1">&#39;dendrite_type&#39;</span><span class="p">]</span><span class="o">==</span> <span class="n">cell_type1</span><span class="p">]</span>
<span class="n">aspiny_df</span> <span class="o">=</span> <span class="n">mouse_ephys_df</span><span class="p">[</span><span class="n">mouse_ephys_df</span><span class="p">[</span><span class="s1">&#39;dendrite_type&#39;</span><span class="p">]</span><span class="o">==</span> <span class="n">cell_type2</span><span class="p">]</span>
<span class="n">sparsely_spiny_df</span> <span class="o">=</span> <span class="n">mouse_ephys_df</span><span class="p">[</span><span class="n">mouse_ephys_df</span><span class="p">[</span><span class="s1">&#39;dendrite_type&#39;</span><span class="p">]</span><span class="o">==</span> <span class="n">cell_type3</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Dataframes successfully created.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dataframes successfully created.
</pre></div>
</div>
</div>
</div>
<p>Next, we select an electrophysiological feature that we could like to compare across the three dendrite types. In this example, we will be taking a look at the <code class="docutils literal notranslate"><span class="pre">fast_though_v_long_square</span></code> response for each of our dendrite types and create a boxplot.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Choose what you would like to compare between the cell types </span>
<span class="n">feature</span> <span class="o">=</span> <span class="s1">&#39;fast_trough_v_long_square&#39;</span>
<span class="n">spiny_ft</span> <span class="o">=</span> <span class="n">spiny_df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span>
<span class="n">aspiny_ft</span> <span class="o">=</span> <span class="n">aspiny_df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span>
<span class="n">sparsely_spiny_ft</span> <span class="o">=</span> <span class="n">sparsely_spiny_df</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span>

<span class="c1"># Store your data </span>
<span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">spiny_ft</span><span class="p">,</span><span class="n">aspiny_ft</span><span class="p">,</span><span class="n">sparsely_spiny_ft</span><span class="p">]</span>

<span class="c1"># Plot your figure </span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Boxplot of Fast Trough&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s1">&#39;Spiny&#39;</span><span class="p">,</span> <span class="s1">&#39;Aspiny&#39;</span><span class="p">,</span><span class="s1">&#39;Sparsely Spiny&#39;</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Voltage (mV)&#39;</span><span class="p">)</span>

<span class="c1"># Show the plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Comparing_Different_Types_of_Cells_37_0.png" src="../_images/Comparing_Different_Types_of_Cells_37_0.png" />
</div>
</div>
</div>
<div class="section" id="layers-of-cortex-depth">
<h2><span class="section-number">5.4.4. </span>Layers of Cortex: Depth<a class="headerlink" href="#layers-of-cortex-depth" title="Permalink to this headline">¶</a></h2>
<p>The Allen also contains information from what layer of cortex the cells in the dataset are harvested from. Like before, we can execute <code class="docutils literal notranslate"><span class="pre">unique()</span></code> on our column of interest again to see what layers our mouse cells are coming from.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">mouse_ephys_df</span><span class="p">[</span><span class="s1">&#39;structure_layer_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;5&#39; &#39;4&#39; &#39;2/3&#39; &#39;6a&#39; &#39;6b&#39; &#39;1&#39;]
</pre></div>
</div>
</div>
</div>
<p>Knowing what layers our cells are coming from allows us to check for any strong differences in electrophysiological, morphological features between different layers. Below we will walk through how to subselect the data according to structure layers and eventually plot some metrics of cells from these layers.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Select the structure layers you would like to compare</span>
<span class="n">layer_1</span> <span class="o">=</span> <span class="s1">&#39;1&#39;</span>
<span class="n">layer_2</span> <span class="o">=</span> <span class="s1">&#39;4&#39;</span>

<span class="c1"># Setup the dataframes that only contain cells from our layers of interest </span>
<span class="n">mouse_1_df</span> <span class="o">=</span> <span class="n">mouse_ephys_df</span><span class="p">[</span><span class="n">mouse_ephys_df</span><span class="p">[</span><span class="s1">&#39;structure_layer_name&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">layer_1</span><span class="p">]</span>
<span class="n">mouse_4_df</span> <span class="o">=</span> <span class="n">mouse_ephys_df</span><span class="p">[</span><span class="n">mouse_ephys_df</span><span class="p">[</span><span class="s1">&#39;structure_layer_name&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">layer_2</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Dataframes successfully created.&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Dataframes successfully created.
</pre></div>
</div>
</div>
</div>
<p>Once we have set up our dataframes, we are able to plot out the morphological and electrophysiological features and attempt to draw connections between the different layers. Below we will create boxplots that compare the rheobase, resting membrane potential, and membrane time constant of cells from layers 1 and 4 of the cortex.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a 1 by 3 figure for our boxplots </span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>

<span class="c1"># Setup our dataframes for rheobase</span>
<span class="n">bp1_feature</span> <span class="o">=</span> <span class="s1">&#39;threshold_i_long_square&#39;</span>
<span class="n">threshold_i_long_square_mouse_1_ft</span> <span class="o">=</span> <span class="n">mouse_1_df</span><span class="p">[</span><span class="n">bp1_feature</span><span class="p">]</span>
<span class="n">threshold_i_long_square_mouse_4_ft</span> <span class="o">=</span> <span class="n">mouse_4_df</span><span class="p">[</span><span class="n">bp1_feature</span><span class="p">]</span>

<span class="c1"># Store our data for rheobase</span>
<span class="n">threshold_i_long_square_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">threshold_i_long_square_mouse_1_ft</span><span class="p">,</span>
                                <span class="n">threshold_i_long_square_mouse_4_ft</span><span class="p">]</span>

<span class="c1"># On the first graph, plot the rheobase</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">threshold_i_long_square_data</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s1">&#39;Layer 1&#39;</span><span class="p">,</span><span class="s1">&#39;Layer 4&#39;</span><span class="p">])</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Rheobase (pA)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Boxplot of Rheobase&#39;</span><span class="p">)</span>

<span class="c1"># Setup our dataframes for resting membrane potential</span>
<span class="n">bp2_feature</span> <span class="o">=</span> <span class="s1">&#39;vrest&#39;</span>
<span class="n">vrest_mouse_1_ft</span> <span class="o">=</span> <span class="n">mouse_1_df</span><span class="p">[</span><span class="n">bp2_feature</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span> <span class="c1"># Drop missing values </span>
<span class="n">vrest_mouse_4_ft</span> <span class="o">=</span> <span class="n">mouse_4_df</span><span class="p">[</span><span class="n">bp2_feature</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span> <span class="c1"># Drop missing values </span>

<span class="c1"># Store our data for vrest</span>
<span class="n">vrest_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">vrest_mouse_1_ft</span><span class="p">,</span><span class="n">vrest_mouse_4_ft</span><span class="p">]</span>

<span class="c1"># On the second graph, create the box plot of resting potential</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">vrest_data</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s1">&#39;Layer 1&#39;</span><span class="p">,</span><span class="s1">&#39;Layer 4&#39;</span><span class="p">])</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Voltage (V)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Boxplot of Resting Potentials&#39;</span><span class="p">)</span>

<span class="c1"># Setup our dataframes for membrane time constant</span>
<span class="n">bp3_feature</span> <span class="o">=</span> <span class="s1">&#39;tau&#39;</span>
<span class="n">tau_mouse_1_ft</span> <span class="o">=</span> <span class="n">mouse_1_df</span><span class="p">[</span><span class="n">bp3_feature</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span> <span class="c1"># Drop missing values </span>
<span class="n">tau_mouse_4_ft</span> <span class="o">=</span> <span class="n">mouse_4_df</span><span class="p">[</span><span class="n">bp3_feature</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span> <span class="c1"># Drop missing values </span>

<span class="c1"># Store our data for membrane time constant </span>
<span class="n">tau_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">tau_mouse_1_ft</span><span class="p">,</span><span class="n">tau_mouse_4_ft</span><span class="p">]</span>

<span class="c1"># On the third graph, create a box plot of Membrane Time Constant </span>
<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">tau_data</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s1">&#39;Layer 1&#39;</span><span class="p">,</span><span class="s1">&#39;Layer 4&#39;</span><span class="p">])</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Membrane Time Constant (ms)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Boxplot of Membrane Time Constant&#39;</span><span class="p">)</span>

<span class="c1"># Show the plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Comparing_Different_Types_of_Cells_44_0.png" src="../_images/Comparing_Different_Types_of_Cells_44_0.png" />
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./Chapter_5"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="Available_Pre-Computed_Features.html" title="previous page"><span class="section-number">5.3. </span>Available Pre-Computed Features</a>
    <a class='right-next' id="next-link" href="../Chapter_6/Two_Photon_Imaging.html" title="next page"><span class="section-number">6. </span>Two Photon Imaging</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Victor Magdaleno-Garcia<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>